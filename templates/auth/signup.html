{% extends "base.html" %}

{% block title %}Sign Up - CS Present{% endblock %}

{% block content %}
<div class="auth-page">
    <div class="auth-container">
        <div class="auth-header">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <h1>CS Present</h1>
            </div>
            <h2>Create Account</h2>
            <p>Join the attendance system</p>
        </div>

        <form class="auth-form" method="POST">
            <div class="form-group">
                <label for="full_name">
                    <i class="fas fa-user"></i>
                    Full Name
                </label>
                <input type="text" id="full_name" name="full_name" 
                       placeholder="Enter your full name" required>
            </div>

            <div class="form-group">
                <label for="matric_number">
                    <i class="fas fa-id-card"></i>
                    Matric Number
                </label>
                <input type="text" id="matric_number" name="matric_number" 
                       placeholder="e.g., CSC/2021/1234" required>
                <small class="form-hint">Use your official matric number format</small>
            </div>

            <div class="form-group">
                <label for="password">
                    <i class="fas fa-lock"></i>
                    Password
                </label>
                <div class="password-input">
                    <input type="password" id="password" name="password" 
                           placeholder="Create a strong password" required>
                    <button type="button" class="password-toggle" onclick="togglePassword('password')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <div class="password-strength">
                    <div class="strength-bar">
                        <div class="strength-fill"></div>
                    </div>
                    <small class="strength-text">Password strength</small>
                </div>
            </div>

            <div class="form-group">
                <label for="confirm_password">
                    <i class="fas fa-lock"></i>
                    Confirm Password
                </label>
                <div class="password-input">
                    <input type="password" id="confirm_password" name="confirm_password" 
                           placeholder="Re-enter your password" required>
                    <button type="button" class="password-toggle" onclick="togglePassword('confirm_password')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <small class="password-match" id="password-match"></small>
            </div>

            <button type="submit" class="btn btn-primary btn-full">
                <i class="fas fa-user-plus"></i>
                Create Account
            </button>
        </form>

        <div class="auth-footer">
            <p>Already have an account? <a href="{{ url_for('login') }}">Sign in here</a></p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const toggle = input.nextElementSibling.querySelector('i');
    
    if (input.type === 'password') {
        input.type = 'text';
        toggle.classList.remove('fa-eye');
        toggle.classList.add('fa-eye-slash');
    } else {
        input.type = 'password';
        toggle.classList.remove('fa-eye-slash');
        toggle.classList.add('fa-eye');
    }
}

// Password strength checker
document.getElementById('password').addEventListener('input', function() {
    const password = this.value;
    const strengthBar = document.querySelector('.strength-fill');
    const strengthText = document.querySelector('.strength-text');
    
    let strength = 0;
    let text = '';
    
    if (password.length >= 8) strength++;
    if (password.match(/[a-z]/)) strength++;
    if (password.match(/[A-Z]/)) strength++;
    if (password.match(/[0-9]/)) strength++;
    if (password.match(/[^a-zA-Z0-9]/)) strength++;
    
    switch(strength) {
        case 0:
        case 1:
            strengthBar.style.width = '20%';
            strengthBar.style.backgroundColor = '#ef4444';
            text = 'Very Weak';
            break;
        case 2:
            strengthBar.style.width = '40%';
            strengthBar.style.backgroundColor = '#f97316';
            text = 'Weak';
            break;
        case 3:
            strengthBar.style.width = '60%';
            strengthBar.style.backgroundColor = '#eab308';
            text = 'Fair';
            break;
        case 4:
            strengthBar.style.width = '80%';
            strengthBar.style.backgroundColor = '#22c55e';
            text = 'Good';
            break;
        case 5:
            strengthBar.style.width = '100%';
            strengthBar.style.backgroundColor = '#16a34a';
            text = 'Strong';
            break;
    }
    
    strengthText.textContent = text;
});

// Password match checker
document.getElementById('confirm_password').addEventListener('input', function() {
    const password = document.getElementById('password').value;
    const confirm = this.value;
    const matchText = document.getElementById('password-match');
    
    if (confirm === '') {
        matchText.textContent = '';
        return;
    }
    
    if (password === confirm) {
        matchText.textContent = '✓ Passwords match';
        matchText.style.color = '#22c55e';
    } else {
        matchText.textContent = '✗ Passwords do not match';
        matchText.style.color = '#ef4444';
    }
});
</script>
{% endblock %}